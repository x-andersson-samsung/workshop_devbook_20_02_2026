/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

window.ElapsedTimeBar=window.ElapsedTimeBar||{id:"ElapsedTimeBar",start:(e,s)=>{i.start(e,s)},reset:()=>{i.reset()},pause:()=>{i.pause()},resume:()=>{i.resume()}};var i={id:"ElapsedTimeBar",barColor:"rgb(200,0,0)",pausedBarColor:"rgba(200,0,0,.6)",isPaused:!1,isFinished:!1,allottedTime:null,timeProgressBar:null,startTime:null,pauseTime:null,pauseTimeDuration:0,handleReady(){let e=Reveal.getConfig();if(!e.allottedTime){console.warn('"allottedTime" property is required by the ElapsedTimeBar plugin.');return}this.barColor=e.barColor||this.barColor,this.pausedBarColor=e.pausedBarColor||this.pausedBarColor;let s,t=document.querySelector(".progress");e.progressBarHeight?(s=`${Number.parseInt(e.progressBarHeight,10)}px`,t&&(t.style.height=s)):e.progress&&t?s=`${t.getBoundingClientRect().height}px`:s="3px";let r=document.createElement("div");r.classList.add("progress");for(let[a,o]of Object.entries({display:"block",position:"fixed",bottom:e.progress?s:0,width:"100%",height:s}))r.style[a]=o;document.querySelector(".reveal").appendChild(r),this.timeProgressBar=document.createElement("div");for(let[a,o]of Object.entries({height:"100%",willChange:"width"}))this.timeProgressBar.style[a]=o;r.appendChild(this.timeProgressBar),this.start(this.convertToMilliseconds(e.allottedTime))},convertToMilliseconds(e){if(typeof e=="number")return e*1e3;if(typeof e=="string"){let s=e.match(/^(\d+)\s*(\w+)?/i);if(s){let t=Number.parseInt(s[1],10);switch(s[2]?s[2].toLowerCase():"s"){case"h":return t*60*60*1e3;case"m":return t*60*1e3;case"s":return t*1e3;case"ms":return t;default:return console.warn("Unrecognized unit when specifying alloted time",e),t*1e3}}}return e*1e3},loop(){if(this.isPaused)return;let s=Date.now()-this.startTime-this.pauseTimeDuration;s>this.allottedTime?(this.timeProgressBar.style.width="100%",this.isFinished=!0):(this.timeProgressBar.style.width=`${s/this.allottedTime*100}%`,requestAnimationFrame(this.loop.bind(this)))},setBarColor(){this.isPaused?this.timeProgressBar.style.backgroundColor=this.pausedBarColor:this.timeProgressBar.style.backgroundColor=this.barColor},start(e,s=0){this.isFinished=!1,this.isPaused=!1,this.allottedTime=e,this.startTime=Date.now()-s,this.pauseTimeDuration=0,this.setBarColor(),this.loop()},reset(){this.start(this.allottedTime)},pause(){this.isPaused||(this.isPaused=!0,this.pauseTime=Date.now(),this.setBarColor())},resume(){this.isPaused&&(this.isPaused=!1,this.pauseTimeDuration+=Date.now()-this.pauseTime,this.pauseTime=null,this.setBarColor(),this.loop())}};Reveal.isReady()?i.handleReady():Reveal.addEventListener("ready",()=>i.handleReady());
